<div class="container">
  <div class="container__card">
    <div class="card__brand">
      <img alt="Logo" class="brand__logo" src="assets/logo.svg">
      <h1 class="brand__title">WpRef</h1>
      <p class="brand__subtitle">Réinitialiser mon mot de passe</p>
    </div>
    <form (ngSubmit)="onSubmit()" [formGroup]="form" class="card__form">
      <div class="field">
        <label for="email">Adresse e-mail</label>
        <input
          autofocus
          formControlName="email"
          id="email"
          pInputText
          placeholder="ton identifiant"
          type="email"
        />
        @if (submitted && form.controls['email'].invalid) {
          <div class="error">
            @if (form.controls['email'].errors?.['required']) {
              <div>L'adresse e-mail est obligatoire.</div>
            }
            @if (form.controls['email'].errors?.['email']) {
              <div>L'adresse e-mail n'est pas valide.</div>
            }
          </div>
        }
      </div>

      <button [disabled]="isSubmitting || form.invalid" class="btn btn--primary" type="submit">
        {{ isSubmitting ? 'Envoi en cours…' : 'Envoyer le lien de réinitialisation' }}
      </button>
    </form>

    <div class="card__footer">
      @if (successMessage) {
        <p class="success">{{ successMessage }}</p>
      }
      @if (errorMessage) {
        <p class="error">{{ errorMessage }}</p>
      }
    </div>
  </div>
</div>
