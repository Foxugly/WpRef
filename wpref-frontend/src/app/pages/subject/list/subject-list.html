<div class="toolbar">
  <h2>Sujets</h2>
  <div class="actions">
    <input pInputText placeholder="Rechercherâ€¦" [ngModel]="q()" (ngModelChange)="q.set($event); load()">
    <p-button id="btn_add_subject" icon="pi pi-plus" (onClick)="goNew()" label="Nouveau" severity="primary"/>
  </div>
</div>

<div class="card">
  @if ((subjects() || []).length === 0) {
    <p class="muted">Aucun sujet.</p>
  } @else {
    <table class="table">
      <thead>
        <tr><th>Nom</th><th>Slug</th><th>Description</th><th style="width:60px;">Actions</th></tr>
      </thead>
      <tbody>
        @for (s of pagedSubjects; track s.id) {
          <tr>
            <td>{{ s.name }}</td>
            <td>{{ s.slug }}</td>
            <td class="muted">{{ s.description }}</td>
            <td class="row-actions">
              <p-button id="btn_edit_subject" icon="pi pi-pencil" (click)="goEdit(s.id)" severity="info" size="small"/>
              <p-button id="btn_delete_subject" icon="pi pi-trash" (click)="goDelete(s.id)" severity="danger" size="small"/>
            </td>
          </tr>
        }
      </tbody>
    </table>
    @if (subjects().length > rows) {
      <div class="table-paginator">
        <p-paginator
          [rows]="rows"
          [totalRecords]="subjects().length"
          [first]="first"
          [rowsPerPageOptions]="[5, 10, 20, 50]"
          (onPageChange)="onPageChange($event)"
        ></p-paginator>
      </div>
    }
  }
</div>

