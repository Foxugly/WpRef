<div class="page">
  <!-- HEADER -->
  <div class="header-line header-line--grid">
    <div class="header-spacer"></div>

    <div class="header-center">
      <h1 class="title">Sujets</h1>
      <p class="subtitle muted">Recherche, liste et actions</p>
    </div>

    <div class="header-actions">
    </div>
  </div>

  <!-- TABLE CARD -->
  <div class="card">
    <div class="card-head">
      <h2 class="card-title"></h2>

      <!-- actions dans le card (à la place du badge) -->
      <div class="card-actions">
        <input
          pInputText
          placeholder="Rechercher…"
          [ngModel]="q()"
          (ngModelChange)="q.set($event); load()"
        />

        <p-button
          (onClick)="goNew()"
          icon="pi pi-plus"
          label="Nouveau"
          severity="primary"
          type="button">
        </p-button>
      </div>
    </div>

    <p-table
      [value]="pagedSubjects"
      showGridlines
      size="small"
      stripedRows
      styleClass="table"
    >
      <ng-template #header>
        <tr>
          <th>Nom</th>
          <th>Description</th>
          <th>Domaine</th>
          <th class="col-actions">Actions</th>
        </tr>
      </ng-template>

      <ng-template #body let-s>
        <tr>
          <td>{{ getName(s) }}</td>

          <td class="muted desc-cell">
            <div class="desc" [innerHTML]="getDescription(s) | stripP"></div>
          </td>

          <td>

          <p-button
                    (onClick)="goDomain(s.domain)"
                    [label]="getDomain(s)"
                    severity="secondary"
                    size="small"
                    type="button"
                    variant="outlined">
                  </p-button>
          </td>

          <td class="col-actions">
            <div class="row-actions">
              <p-button
                (click)="goEdit(s.id)"
                icon="pi pi-pencil"
                id="btn_edit_subject"
                severity="info"
                size="small"
                type="button">
              </p-button>

              <p-button
                (click)="goDelete(s.id)"
                icon="pi pi-trash"
                id="btn_delete_subject"
                severity="danger"
                size="small"
                type="button">
              </p-button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>

    @if (subjects().length > rows) {
      <div class="table-paginator">
        <p-paginator
          (onPageChange)="onPageChange($event)"
          [first]="first"
          [rowsPerPageOptions]="[5, 10, 20, 50]"
          [rows]="rows"
          [totalRecords]="subjects().length">
        </p-paginator>
      </div>
    }
  </div>
</div>
