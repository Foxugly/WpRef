<div class="toolbar">
  <h2>Questions</h2>
  <div class="actions">
    <input (ngModelChange)="q.set($event); load()" [ngModel]="q()" pInputText placeholder="Rechercherâ€¦">
    <p-button (onClick)="goNew()" icon="pi pi-plus" id="btn_add_subject" label="Nouveau" severity="primary"></p-button>
  </div>
</div>

<p-table
  [value]="pagedQuestions"
  showGridlines
  size="small"
  stripedRows
>
  <ng-template #header>
    <tr>
      <th>Titre</th>
      <th>Active</th>
      <th>Subjects</th>
      <th style="width:60px;">Actions</th>
    </tr>
  </ng-template>
  <ng-template #body let-q>
    <tr>
      <td>{{ q.title }}</td>
      <td class="center-cell"><i
        [ngClass]="q.active ? 'pi-check-circle active-icon' : 'pi-times-circle inactive-icon'"
        class="pi"
      ></i></td>
      <td class="center-cell">@if (q.subjects) {
        @if (q.subjects.length) {
          <div class="quiz-question__subjects">
            @for (s of q.subjects; track s.id) {
              <p-button
                (onClick)="goSubject(s.id)"
                [label]="s.name"
                [style]="{ marginRight: '5px' }"
                severity="secondary"
                size="small"
                variant="outlined"
              ></p-button>
            }
          </div>
        }
      }</td>
      <td class="row-actions">
        <p-button (click)="goView(q.id)" icon="pi pi-eye" id="btn_add_question" severity="secondary"
                  size="small"></p-button>
        <p-button (click)="goEdit(q.id)" icon="pi pi-pencil" id="btn_add_question" severity="info"
                  size="small"></p-button>
        <p-button (click)="goDelete(q.id)" icon="pi pi-trash" id="btn_delete_question" severity="danger"
                  size="small"></p-button>
      </td>
    </tr>

  </ng-template>
</p-table>
@if (questions().length > rows) {
  <div class="table-paginator">
    <p-paginator
      (onPageChange)="onPageChange($event)"
      [first]="first"
      [rowsPerPageOptions]="[5, 10, 20, 50]"
      [rows]="rows"
      [totalRecords]="questions().length"
    ></p-paginator>
  </div>
}


